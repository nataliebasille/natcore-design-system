@theme {
  --tone-50-primary: var(--color-primary-scale-50);
  --on-tone-50-primary: var(--color-on-primary-scale-50);
  --tone-100-primary: var(--color-primary-scale-100);
  --on-tone-100-primary: var(--color-on-primary-scale-100);
  --tone-200-primary: var(--color-primary-scale-200);
  --on-tone-200-primary: var(--color-on-primary-scale-200);
  --tone-300-primary: var(--color-primary-scale-300);
  --on-tone-300-primary: var(--color-on-primary-scale-300);
  --tone-400-primary: var(--color-primary-scale-400);
  --on-tone-400-primary: var(--color-on-primary-scale-400);
  --tone-500-primary: var(--color-primary-scale-500);
  --on-tone-500-primary: var(--color-on-primary-scale-500);
  --tone-600-primary: var(--color-primary-scale-600);
  --on-tone-600-primary: var(--color-on-primary-scale-600);
  --tone-700-primary: var(--color-primary-scale-700);
  --on-tone-700-primary: var(--color-on-primary-scale-700);
  --tone-800-primary: var(--color-primary-scale-800);
  --on-tone-800-primary: var(--color-on-primary-scale-800);
  --tone-900-primary: var(--color-primary-scale-900);
  --on-tone-900-primary: var(--color-on-primary-scale-900);
  --tone-950-primary: var(--color-primary-scale-950);
  --on-tone-950-primary: var(--color-on-primary-scale-950);

  --tone-50-secondary: var(--color-secondary-scale-50);
  --on-tone-50-secondary: var(--color-on-secondary-scale-50);
  --tone-100-secondary: var(--color-secondary-scale-100);
  --on-tone-100-secondary: var(--color-on-secondary-scale-100);
  --tone-200-secondary: var(--color-secondary-scale-200);
  --on-tone-200-secondary: var(--color-on-secondary-scale-200);
  --tone-300-secondary: var(--color-secondary-scale-300);
  --on-tone-300-secondary: var(--color-on-secondary-scale-300);
  --tone-400-secondary: var(--color-secondary-scale-400);
  --on-tone-400-secondary: var(--color-on-secondary-scale-400);
  --tone-500-secondary: var(--color-secondary-scale-500);
  --on-tone-500-secondary: var(--color-on-secondary-scale-500);
  --tone-600-secondary: var(--color-secondary-scale-600);
  --on-tone-600-secondary: var(--color-on-secondary-scale-600);
  --tone-700-secondary: var(--color-secondary-scale-700);
  --on-tone-700-secondary: var(--color-on-secondary-scale-700);
  --tone-800-secondary: var(--color-secondary-scale-800);
  --on-tone-800-secondary: var(--color-on-secondary-scale-800);
  --tone-900-secondary: var(--color-secondary-scale-900);
  --on-tone-900-secondary: var(--color-on-secondary-scale-900);
  --tone-950-secondary: var(--color-secondary-scale-950);
  --on-tone-950-secondary: var(--color-on-secondary-scale-950);

  --tone-50-accent: var(--color-accent-scale-50);
  --on-tone-50-accent: var(--color-on-accent-scale-50);
  --tone-100-accent: var(--color-accent-scale-100);
  --on-tone-100-accent: var(--color-on-accent-scale-100);
  --tone-200-accent: var(--color-accent-scale-200);
  --on-tone-200-accent: var(--color-on-accent-scale-200);
  --tone-300-accent: var(--color-accent-scale-300);
  --on-tone-300-accent: var(--color-on-accent-scale-300);
  --tone-400-accent: var(--color-accent-scale-400);
  --on-tone-400-accent: var(--color-on-accent-scale-400);
  --tone-500-accent: var(--color-accent-scale-500);
  --on-tone-500-accent: var(--color-on-accent-scale-500);
  --tone-600-accent: var(--color-accent-scale-600);
  --on-tone-600-accent: var(--color-on-accent-scale-600);
  --tone-700-accent: var(--color-accent-scale-700);
  --on-tone-700-accent: var(--color-on-accent-scale-700);
  --tone-800-accent: var(--color-accent-scale-800);
  --on-tone-800-accent: var(--color-on-accent-scale-800);
  --tone-900-accent: var(--color-accent-scale-900);
  --on-tone-900-accent: var(--color-on-accent-scale-900);
  --tone-950-accent: var(--color-accent-scale-950);
  --on-tone-950-accent: var(--color-on-accent-scale-950);

  --tone-50-surface: var(--color-surface-scale-50);
  --on-tone-50-surface: var(--color-on-surface-scale-50);
  --tone-100-surface: var(--color-surface-scale-100);
  --on-tone-100-surface: var(--color-on-surface-scale-100);
  --tone-200-surface: var(--color-surface-scale-200);
  --on-tone-200-surface: var(--color-on-surface-scale-200);
  --tone-300-surface: var(--color-surface-scale-300);
  --on-tone-300-surface: var(--color-on-surface-scale-300);
  --tone-400-surface: var(--color-surface-scale-400);
  --on-tone-400-surface: var(--color-on-surface-scale-400);
  --tone-500-surface: var(--color-surface-scale-500);
  --on-tone-500-surface: var(--color-on-surface-scale-500);
  --tone-600-surface: var(--color-surface-scale-600);
  --on-tone-600-surface: var(--color-on-surface-scale-600);
  --tone-700-surface: var(--color-surface-scale-700);
  --on-tone-700-surface: var(--color-on-surface-scale-700);
  --tone-800-surface: var(--color-surface-scale-800);
  --on-tone-800-surface: var(--color-on-surface-scale-800);
  --tone-900-surface: var(--color-surface-scale-900);
  --on-tone-900-surface: var(--color-on-surface-scale-900);
  --tone-950-surface: var(--color-surface-scale-950);
  --on-tone-950-surface: var(--color-on-surface-scale-950);
}

@utility palette-* {
  --tone-50: --value(--tone-50-*);
  --on-tone-50: --value(--on-tone-50-*);
  --tone-100: --value(--tone-100-*);
  --on-tone-100: --value(--on-tone-100-*);
  --tone-200: --value(--tone-200-*);
  --on-tone-200: --value(--on-tone-200-*);
  --tone-300: --value(--tone-300-*);
  --on-tone-300: --value(--on-tone-300-*);
  --tone-400: --value(--tone-400-*);
  --on-tone-400: --value(--on-tone-400-*);
  --tone-500: --value(--tone-500-*);
  --on-tone-500: --value(--on-tone-500-*);
  --tone-600: --value(--tone-600-*);
  --on-tone-600: --value(--on-tone-600-*);
  --tone-700: --value(--tone-700-*);
  --on-tone-700: --value(--on-tone-700-*);
  --tone-800: --value(--tone-800-*);
  --on-tone-800: --value(--on-tone-800-*);
  --tone-900: --value(--tone-900-*);
  --on-tone-900: --value(--on-tone-900-*);
  --tone-950: --value(--tone-950-*);
  --on-tone-950: --value(--on-tone-950-*);

  @variant dark {
    --tone-50: --value(--tone-950- *);
    --on-tone-50: --value(--on-tone-950- *);
    --tone-100: --value(--tone-900- *);
    --on-tone-100: --value(--on-tone-900- *);
    --tone-200: --value(--tone-800- *);
    --on-tone-200: --value(--on-tone-800- *);
    --tone-300: --value(--tone-700- *);
    --on-tone-300: --value(--on-tone-700- *);
    --tone-400: --value(--tone-600- *);
    --on-tone-400: --value(--on-tone-600- *);
    --tone-500: --value(--tone-500- *);
    --on-tone-500: --value(--on-tone-500- *);
    --tone-600: --value(--tone-400- *);
    --on-tone-600: --value(--on-tone-400- *);
    --tone-700: --value(--tone-300- *);
    --on-tone-700: --value(--on-tone-300- *);
    --tone-800: --value(--tone-200- *);
    --on-tone-800: --value(--on-tone-200- *);
    --tone-900: --value(--tone-100- *);
    --on-tone-900: --value(--on-tone-100- *);
    --tone-950: --value(--tone-50- *);
    --on-tone-950: --value(--on-tone-50- *);
  }
}

@utility bg-* {
  /* Resolve the color token behind bg-* (theme value OR arbitrary like bg-[#...] / bg-(--my-var)) */
  --tone-current-bg-raw: --value(--color-*, [color], [*]);

  /* Resolve optional alpha modifier: bg-foo/50, bg-foo/[.35], etc */
  --_tone-bg-alpha: --modifier([percentage], [number]);
  --_tone-bg-alpha: calc(--modifier(integer) * 1%);
  --_tone-bg-alpha: calc(--modifier(number) * 100%);

  /* Apply background the same way Tailwind v4 does (via color-mix) */
  background-color: color-mix(
    in oklab,
    var(--tone-current-bg-raw) var(--_tone-bg-alpha, 100%),
    transparent
  );

  /* Expose your “current” vars */
  --tone-current-bg: color-mix(
    in oklab,
    var(--tone-current-bg-raw) var(--_tone-bg-alpha, 100%),
    transparent
  );

  /*
    If you have “on” tokens, this will set fg automatically for theme-backed colors.
    For arbitrary bg values, this line will just be omitted (no match).
  */
  --tone-current-fg: --value(--color-on-*, [*]);
}
